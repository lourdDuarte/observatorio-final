
{% extends 'base.html' %}
{% load static %}
{% block head_content %}

    <title>IPC - listado de datos</title>

{% endblock head_content %}

{% block container %}
<div class="col-sm-12 col-xl-10" style="margin-top:3em;">
    <div class="bg-light rounded h-100 p-4">
        
        <div class="col-sm-12 col-xl-6">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-6">IPC - variables interanual / intermensual (actualizados)</h6>
                <div style= "width: 650px; margin: 35px auto" id="chart"></div>
            </div>
        </div>
    </div>
    <div class="bg-light rounded h-100 p-4">
      <form role="form" method="POST" enctype="multipart/form-data" url='#'>
          {% csrf_token %}
          {% if messages %}
          <ul class="messages">
              {% for message in messages %}
                  <li
                      {% if message.tags %} 
                          class="{{ message.tags }}"
                      {% endif %}>{{ message }}</li>
              {% endfor %}
          </ul>
      {% endif %}
          <h6 class="mb-4">IPC - Datos</h6>
          
      </form>
      
  </div>
</div>

<script>
   
    
    function obtenerDatosInteranualActual(){
      interanual_actual = []
        
            {% for data in interanual  %}
                {
                  interanual_actual.push({{data.mes_anterior}}) 
                }
               
    
            {% endfor %}
            
      return interanual_actual
    }

    
   
    function obtenerDatosIntermensualActual(){
      
      intermensual_actual = []
      {% for data in intermensual  %}
          {
            intermensual_actual.push({{data.mes_a√±o_anterior}}) 
          }
         

      {% endfor %}
      
      return intermensual_actual
    }


    
    var options = {
        series: [
        {
          name: "Interanual",
          data: obtenerDatosInteranualActual()
        },
        {
          name: "Intermensual",
          data: obtenerDatosIntermensualActual()
        }
      ],
        chart: {
        height: 350,
        type: 'line',
        dropShadow: {
          enabled: true,
          color: '#000',
          top: 18,
          left: 7,
          blur: 10,
          opacity: 0.2
        },
        zoom: {
          enabled: false
        },
        toolbar: {
          show: false
        }
      },
      colors: ['#77B6EA', '#545454'],
      dataLabels: {
        enabled: true,
      },
      stroke: {
        curve: 'smooth'
      },
      
      grid: {
        borderColor: '#e7e7e7',
        row: {
          colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
          opacity: 0.5
        },
      },
      markers: {
        size: 1
      },
      xaxis: {
        categories: ['Jan', 'Feb'],
        title: {
          text: 'Month'
        }
      },
      yaxis: {
        title: {
          text: 'Temperature'
        },
        min: -30,
        max: 80
      },
      legend: {
        position: 'top',
        horizontalAlign: 'right',
        floating: true,
        offsetY: -25,
        offsetX: -5
      }
      };

      var chart = new ApexCharts(document.querySelector("#chart"), options);
      chart.render();
    
</script>
{% endblock container %}